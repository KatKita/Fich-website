<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smooth Big Fish</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #aee9f7;
    }
    img#fish {
      position: absolute;
      width: 200px;
      height: auto;
      pointer-events: none;
      transform-origin: left center;
      transition: filter 0.1s linear;
    }
  </style>
</head>
<body>
  <img id="fish" src="Fish.png" alt="Fish">
  <script>
    const fish = document.getElementById("fish");
    let fishX = window.innerWidth / 2;
    let fishY = window.innerHeight / 2;
    let mouseX = fishX;
    let mouseY = fishY;
    let angle = 0;
    let lastMove = Date.now();
    let prevX = fishX;
    let prevY = fishY;
    let headOffsetY = 0;

    fish.onload = () => {
      headOffsetY = fish.clientHeight / 2;
      fishY -= headOffsetY;
    };

    document.addEventListener("mousemove", e => {
      mouseX = e.clientX;
      mouseY = e.clientY - headOffsetY;
      lastMove = Date.now();
    });

    function animate() {
      const now = Date.now();
      const idle = now - lastMove > 1000;
      const dx = mouseX - fishX;
      const dy = mouseY - fishY;
      const dist = Math.hypot(dx, dy);

      if (!idle && dist > 1) {
        fishX += dx * 0.05;
        fishY += dy * 0.05;
      }

      const target = idle
        ? angle + 0.001
        : Math.atan2(dy, dx);
      let delta = target - angle;
      delta = Math.atan2(Math.sin(delta), Math.cos(delta));
      angle += delta * (idle ? 0.02 : 0.1);

      const vx = fishX - prevX;
      const vy = fishY - prevY;
      const speed = Math.hypot(vx, vy);
      const blur = Math.min(speed * 0.1, 5);
      fish.style.filter = blur > 0.5 ? `blur(${blur}px)` : "none";

      fish.style.left = fishX + "px";
      fish.style.top = fishY + "px";
      fish.style.transform = `rotate(${angle}rad)`;

      prevX = fishX;
      prevY = fishY;
      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
